<div class="my-4">
    <span class="font-weight-bold">Show All Problems</span>
    <button type="button" class="btn btn-success float-right" onclick="createdProblem();">Created Problem</button>
</div>
<div class="row customTableTop">
    <div class="col-md-1">
        <span class="font-italic">ProblemId</span>
    </div>
    <div class="col-md-4">
        <span class="font-italic">Title</span>
    </div>
    <div class="col-md-2">
        <span class="font-italic">Created By</span>
    </div>
    <div class="col-md-3 ml-auto">
        <span class="font-italic">Options</span>
    </div>
</div>
<hr/>
{% for problem in problemList %}
    <div class="row customTableItem">
        <div class="col-md-1">
            <span class="text-muted">#{{problem["id_problem"]}}</span>
        </div>
        <div class="col-md-4">
            <span class="text-muted">{{problem["title"]}}</span>
        </div>
        <div class="col-md-2">
            <span class="text-muted">{{problem["username"]}}</span>
        </div>
        <div class="col-md-3 ml-auto">
            <a href="#" class="badge badge-pill badge-info" onclick="showReportDetail({{problem['id_problem']}});">report</a>
            <a href="#" class="badge badge-pill badge-warning" onclick="updateProblem({{problem['id_problem']}});">updateProblem</a>
            <a href="#" class="badge badge-pill badge-warning">updateData</a>
            <a href="#" class="badge badge-pill badge-danger">delete</a>
        </div>
    </div>
    <hr class="customTableItemHr"/>
{% endfor%}
{% import "macro/page.html" as pg %}
{{ pg.page(session.get("currentPage_problems"),session.get("totalPage_problems"),'/admin/problems',"#managementContent") }}
<div class="modal fade" id="reportDetail" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Problem Report</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body mx-0 justify-content-center" id="reportDetailContent">
          
        </div>
      </div>
    </div>
  </div>
<script>
    function showReportDetail(proNo){
        $("#reportDetail").modal("show");
        $.ajax({
            url: $SCRIPT_ROOT+"/proDetail/problemReport",
            type: "POST",
            data: {
                "id_problem":proNo,
                "graphType":"statistics"
            },
            beforeSend: function(){
                $.ajax({
                    url: $SCRIPT_ROOT + "/base/loading",
                    type: 'POST',
                    success:function(response){
                        $("#reportDetailContent").html(response);
                    }
                });
            },
            success:function(response){
                $("#reportDetailContent").html(response);
            }
        });
    }
</script>
<script>
    function createdProblem(){
        $.ajax({
            url: $SCRIPT_ROOT + "/admin/createProblem",
            type: "POST",
            success: function(response){
                $("#managementContent").html(response);
            }
        });
    }
</script>
<script>
    function updateProblem(problemId){
        console.log(problemId);

        $.ajax({
            url: $SCRIPT_ROOT + "/admin/updateProblem",
            type: "POST",
            data:{
                "id_problem":problemId
            },
            success: function(response){
                $("#managementContent").html(response);
            }
        });
    }
</script>